
#### Epic #1 — **Core Semantic-Agent Framework**

_Objective: ship a fully-self-contained micro-service template that can be pointed at any structured source and, within minutes, publish a secure, ontology-enriched MCP/A2A card._

  
Epic 1 – **Agent Runtime & Shared Utilities** 

| Cluster                                                                                                          | Core Capability                                                                                                                                                                              | Product Value & Outcomes                                                                                                                                                                                                                                                                                                                                                                    |
| :--------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **1A Container & Bootstrap**                                                                                     | **Universal Deployable Image**                                                                                                                                                               | One signed OCI artifact that runs the same on a laptop, AKS, or AWS Fargate—slashing “it-works-on-my-machine” friction and letting ops teams standardise pipelines.                                                                                                                                                                                                                         |
|                                                                                                                  | **Five-Minute Quick-Start**                                                                                                                                                                  | A single `docker run` (or `helm install`) stands up a fresh agent, showing a healthy heartbeat and sample crawl—so PoCs convert to buy-in fast.                                                                                                                                                                                                                                             |
|                                                                                                                  | **Versioned Distribution Channel**                                                                                                                                                           | Each image is semantically versioned and SBOM-backed, giving security teams traceability and allowing safe roll-backs. Sigstore signing & SBOM baked into CI                                                                                                                                                                                                                                |
|                                                                                                                  | **Slim Footprint**                                                                                                                                                                           | ≤ 250 MB keeps cold-start and egress costs low, enabling edge or on-prem deployments where bandwidth/storage are tight.                                                                                                                                                                                                                                                                     |
|                                                                                                                  | **Consistent Dependency Baseline**                                                                                                                                                           | Every downstream capability (connectors, enrichment, NLQ) inherits identical Python, OS, and library versions—removing “dependency hell” from the vocabulary.                                                                                                                                                                                                                               |
| **1B Config & Secrets Core**                                                                                     | **Unified Declarative Config**                                                                                                                                                               | One YAML/ENV schema across all agents means fewer playbook steps and quicker audits; new sources or policies are changed once and ripple everywhere.                                                                                                                                                                                                                                        |
|                                                                                                                  | **Enterprise Secret Bridging**                                                                                                                                                               | Out-of-the-box hooks to Azure Key Vault and K8s Secrets allow security teams to keep credentials where they already live—no shadow vaults, no copy-paste.                                                                                                                                                                                                                                   |
|                                                                                                                  | **Environment Overlays**                                                                                                                                                                     | Dev/stage/prod values inherit from a single file, so promoting an agent is “flip the flag,” not “rewrite the manifest.”                                                                                                                                                                                                                                                                     |
|                                                                                                                  | **Live Reload & Rotation**                                                                                                                                                                   | Ops can rotate passwords or tweak polling intervals without downtime, keeping SLAs intact and patch windows short.                                                                                                                                                                                                                                                                          |
|                                                                                                                  | **Built-in Redaction Guardrails**                                                                                                                                                            | Even in debug mode, secrets never hit logs—closing an easy but common compliance gap before auditors find it.                                                                                                                                                                                                                                                                               |
| **1C Runtime Engine**                                                                                            | **AutoGen-Core Execution Backbone** – runs the in-process message bus, mounts agents via a one-line helper, and automatically tags each handler with a queue that reports depth and latency. | • **Elastic by Construction** – the same codebase shrinks to a single-process dev loop or stretches across pods without refactor. • \*\*Predictable Back-Pressure\*\* – when queues exceed set thresholds the runtime signals “‎\`busy\`‎” in its readiness state, letting K8s or the Hub traffic-shift intelligently.                                                                      |
|                                                                                                                  | **Stateful Readiness Flags** – internal FSM toggles *starting → running → busy → draining*, which downstream probes (1H) simply read.                                                        | • **Zero-Downtime Upgrades** – rolling deployments respect the state machine, so no query is dropped during an update.                                                                                                                                                                                                                                                                      |
|                                                                                                                  | **Agent Plug-in Simplicity** – developers register a new agent with three lines; the runtime handles threading, queue wiring, and metric hooks.                                              | • **Rapid Innovation** – teams ship new adapters or enrichment bots without touching core infrastructure.                                                                                                                                                                                                                                                                                   |
| **1D Message Schema & Versioning**                                                                               | **Canonical Event Contracts** – Strongly-typed dataclass messages (`SchemaSnapshot`, `FailureNotice`, etc.) with a `schema_version` header and auto-upgrade hooks.                           | • **Stable Integrations** – New connectors, enrichment agents, or external partners can upgrade independently without breaking. • \*\*Ecosystem Ready\*\* – Third-party teams can build agents in any language as long as they speak the JSON contract. • \*\*Faster Debugging\*\* – Clear, self-describing payloads shrink investigation time.                                             |
| **1E Instrumentation (Logs & Traces)**                                                                           | **Automatic Telemetry Emitters** – decorators add OpenTelemetry spans, structured JSON logs, and counters (latency, tokens, rows) to every handler call.                                     | • **Instant Observability** – the moment an agent is added, traces and metrics start flowing—no boilerplate required. • \*\*down-stream cost analytics\*\* – consistent counters feed charge-back and optimisation dashboards built later in Epic 7\.                                                                                                                                       |
| *Note:* 1E **records** and stores telemetry; **exposing** it happens solely through the endpoints defined in 1H. | **Context-Aware Logging** – each log line carries correlation IDs and redacted config snippets, speeding incident triage while safeguarding secrets.                                         | • **Audit-Ready** – structured evidence supports SOC 2 investigations without extra coding.                                                                                                                                                                                                                                                                                                 |
| **1F Resilience Utilities**                                                                                      | **Central Retry & Back-Off Decorator** – a single Tenacity profile with jittered retries and error-class-specific limits that every connector and agent adopts.                              | • **Self-Healing Behaviour** – transient DB or API hiccups resolve automatically, preserving SLAs and reducing pager noise.                                                                                                                                                                                                                                                                 |
|                                                                                                                  | **Circuit-Breaker Helper** – switches a failing dependency to “‎open‎” after repeated faults, causing the runtime (1C) to mark the agent *busy* until recovery.                              | • **Blast-Radius Control** – one misbehaving connector can’t exhaust threads or queues, keeping the entire mesh stable.                                                                                                                                                                                                                                                                     |
|                                                                                                                  | **Unified Error Taxonomy** – maps raw exceptions to `Transient`, `Auth`, `Quota`, or `Logic` buckets.                                                                                        | • **Actionable Alerts** – Hub policies and SRE playbooks can route incidents based on a common vocabulary instead of stack traces.                                                                                                                                                                                                                                                          |
| **1G Lifecycle & Hot-Reload**                                                                                    | **Graceful Ops Hooks** – `SIGINT/SIGTERM` drain queues; `SIGHUP` triggers in-place config reload; rolling upgrades via `/ready` gating.                                                      | • **Zero-Downtime Changes** – Rotate secrets, bump polling cadence, or ship a new shared library without killing live queries. • \*\*Shorter Patch Windows\*\* – Security fixes deploy in minutes rather than late-night maintenance slots. • \*\*Operator Confidence\*\* – Clear lifecycle states (“starting”, “running”, “draining”) integrate cleanly with K8s and blue-green pipelines. |
| **1H Health & Metrics Endpoints**                                                                                | **Universal Liveness / Readiness Probes** – `/health` (liveness) and `/ready` (readiness) emit simple JSON status, queue depth, and build info.                                              | • **Kubernetes-Friendly** – Works out-of-the-box with any orchestrator’s health checks, enabling automatic restarts and reliable rolling updates. • \*\*Fast RCA\*\* – Ops see at a glance whether an incident is code, config, or dependency failure (e.g., DB unreachable).                                                                                                               |
|                                                                                                                  | **Prometheus Metrics Endpoint (`/metrics`)** – Exposes counters and histograms for throughput, latency, error rates, token usage.                                                            | • **Single Pane of Glass** – SREs build dashboards that compare every agent without custom scrapers. • \*\*Data-Driven Scaling\*\* – Autoscaling policies (Epic 9\) rely on these metrics to add/remove pods.                                                                                                                                                                               |
| **1I Developer CLI**                                                                                             | **`quillux` Command Suite** – `init`, `run`, `test`, `logs`, `shell` powered by Typer \+ Rich.                                                                                               | • **Five-Minute Developer Experience** – New joiners scaffold, run, and poke an agent without reading the codebase. • \*\*Streamlined Connector Dev\*\* – Adapter authors can spin local DB containers, run tests, and view pretty-printed \`SchemaSnapshot\`s in one command.                                                                                                              |
